{#- This file is part of sner4 project governed by MIT license, see the LICENSE.txt file. -#}
{% extends "base.html" %}

{% block title %}Services grouped{% endblock %}

{% block script %}
<script type="text/javascript">
	var dt_service_grouped_table_options = {
		'ajax': {'url': "{{ url_for('storage.service_grouped_json_route', **request.args) }}", 'method': 'POST'},
		'columns': [
			dt_column('info', {'render': function (data, type, row, meta) { return storage_pagepart_service_list_filter_info_link({'info': row['info'], 'info_encoded': encodeURIComponent(row['info'])}); }}),
			dt_column('nr_services')
		],
		'order': [[1, 'desc']]
	};
	$(document).ready(function() {
		var dt_service_grouped_table = $('#service_grouped_table').DataTable($.extend({}, dt_ajax_options, dt_service_grouped_table_options));
	});
</script>
{% endblock %}


{% block content %}
<div class="services">
	<h1>Services grouped{% if 'filter' in request.args %} <small><a class="btn btn-xs btn-info" href="{{ url_for('storage.service_grouped_route') }}">unfilter</a></small>{% endif %}</h1>

	<div id="service_grouped_table_toolbar" class="dt_toolbar">
		<div class="btn-group" role="group">
			<a class="btn btn-xs btn-default disabled">crop at:</a>
			{% for crop in [2, 3, 4, 5] %}
				<a class="btn btn-xs btn-default {% if request.args.get('crop')|int == crop %} active{% endif %}" href="{{ url_for('storage.service_grouped_route', crop=crop) }}">{{ crop }}</a>
			{% endfor %}
			<a class="btn btn-xs btn-default {% if not request.args.get('crop')|int %} active{% endif %}" href="{{ url_for('storage.service_grouped_route') }}">no crop</a>
		</div>
	</div>

	<table id="service_grouped_table" class="table table-hover table-responsive table-condensed"></table>
</div>
{% endblock %}
